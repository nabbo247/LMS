@model IEnumerable<LMSBL.DBModels.TblCourse>

@{
    ViewBag.Title = "GetAllCourses";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row pt-3">
    <div class="col-6 col-sm-6 col-md-6">

    </div>
    <div class="form-inline form-group col-4 col-sm-4 col-md-4">

    </div>
    <div class="form-group col-2 col-sm-2 col-md-2">
        <button type="button" onclick="location.href='@Url.Action("AddCourse", "Courses")';return false;"
            class="btn pl-5 pr-5 text-center btn-warning pull-right">Add</button>
    </div>
</div>
<table id="Courses" class="table table-responsive table-striped table-bordered">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.CourseName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CourseDetails)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CourseCategory)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CoursePath)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.IsActive)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TenantId)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TenantName)
            </th>
            <th>Actions</th>
        </tr>
    </thead>

    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.CourseName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CourseDetails)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CourseCategory)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CoursePath)
                </td>
                @if (item.IsActive == true)
                {
                    <td>
                        <i class="fa fa-check" aria-hidden="true" style="color:lightgreen;"></i>
                    </td>
                }
                else
                {
                    <td>
                        <i class="fa fa-times" aria-hidden="true" style="color:red;"></i>
                    </td>
                }

                <td>
                    @Html.DisplayFor(modelItem => item.TenantId)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TenantName)
                </td>
                <td>
                    <button type="button" onclick="location.href='@Url.Action("EditCourse", "Courses",new { id = item.CourseId })';return false;"
                            class="btn text-center btn-warning">
                        Edit
                    </button>
                    @*<button type="button" class="btn  text-center btn-warning"
                        onclick="ConfirmationAlert('@item.CourseName','@item.CourseId',true)">
                        Delete
                    </button>*@
                </td>
            </tr>
        }
    </tbody>

</table>

<script type="text/javascript">
    function ConfirmationAlert(Name, Id, IsActive) {
        debugger;
        var data = {
            id: Id
        }
        var strDelete = "";
        if (IsActive == true) {
            strDelete = "Deactivate";
        }
        else {
            strDelete = "Activate";
        }
        swal({
            title: "Are you sure you want to " + strDelete + " Course " + Name + " ?",
            text: "You are going to " + strDelete + " the tenant",
            type: "warning",
            showCancelButton: true,
            confirmButtonClass: "btn-danger",
            confirmButtonText: strDelete,
            cancelButtonText: "Cancel",

        }).then((isConfirm) => {
            if (isConfirm.value == true) {
                $.ajax({
                    url: "/Courses/DeleteCourse",
                    type: "POST",
                    contentType: "application/json;charset=UTF-8",
                    dataType: "json",
                    data: JSON.stringify(data),
                    success: function (result) {
                        var baseUrl = "/Courses/Index";
                        if (result == 1) {
                            window.location.href = baseUrl
                        }
                        else {
                            alert('Something went wrong');
                        }

                    },
                    error: function (errormessage) {
                        alert(errormessage.responseText);
                    }
                });

            } else {
                swal("Cancelled", "Cancelled", "error");
            }
        });
    }
</script>
